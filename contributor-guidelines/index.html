<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Robolectric</title>
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-58882116-1"]);
  _gaq.push(["_trackPageview"]);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
    <link href="../images/favicon-6cf12dec.png" rel="icon" type="image/png" />
    <link href="../stylesheets/application-08be582c.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="../javascripts/application-da39a3ee.js" type="text/javascript"></script>
</head>

<body>
    <div id="wrapper">
        <div id="header">
            <ul class="nav navbar-nav pull-right">
    <li>
        <a href='http://robolectric.blogspot.com'>
            <i class='glyphicon glyphicon-book'></i>
            <span>Blog</span>
        </a>
    </li>
    <li>
        <a href='http://groups.google.com/group/robolectric'>
            <i class='glyphicon glyphicon-envelope'></i>
            <span>Mailing List</span>
        </a>
    </li>
    <li>
        <a href='/javadoc/index.html?overview-summary.html'>
            <i class='glyphicon glyphicon-cog'></i>
            <span>API Docs</span>
        </a>
    </li>
</ul>
        </div>

        <div id="sidebar">
            <a href="/"><img class="logo" src="../images/robolectric-stacked-3f7ad42c.png" /></a><ul class='nav nav-stacked'><li class='nav-header'>Setup</li><li class='nav-item'><a href='/installation/'>Installation</a></li><li class='nav-item'><a href='/quick-start/'>Quick Start</a></li><li class='nav-item'><a href='/eclipse-quick-start/'>Eclipse Quick Start</a></li><li class='nav-item'><a href='/download/'>Downloads</a></li></ul><ul class='nav nav-stacked'><li class='nav-header'>User Guide</li><li class='nav-item'><a href='/getting-started/'>Getting Started</a></li><li class='nav-item'><a href='/configuring/'>Configuring Robolectric</a></li><li class='nav-item'><a href='/starting-components/'>Starting Other Components</a></li><li class='nav-item'><a href='/custom-shadows/'>Creating Custom Shadows</a></li><li class='nav-item'><a href='/activity-lifecycle/'>Driving the Activity Lifecycle</a></li><li class='nav-item'><a href='/resource-qualifiers/'>Using Qualified Resources</a></li></ul><ul class='nav nav-stacked'><li class='nav-header'>Customizing</li><li class='nav-item'><a href='/extending/'>Extending Robolectric</a></li><li class='nav-item'><a href='/custom-test-runner/'>Customizing the Test Runner</a></li><li class='nav-item'><a href='/roboguice/'>Integrating with RoboGuice</a></li></ul><ul class='nav nav-stacked'><li class='nav-header'>Contributing</li><li class='nav-item'><a href='/contributor-guidelines/'>Contributor Guidelines</a></li><li class='nav-item'><a href='/release-notes/'>Release Notes</a></li><li class='nav-item'><a href='/android-jars/'>Real Android JARs</a></li><li class='nav-item'><a href='/resources/'>Other Resources</a></li></ul>
        </div>

        <div id="content">
            <h1>Coding Guidelines</h1>

<h2>Functionality should have appropriate unit tests</h2>

<p>Robolectric is a unit testing framework and it is important that Robolectric itself be very well tested. All classes
should have unit test classes. All public methods should have unit tests. Those classes and methods should have their
possible states well tested. Copied Android source should at least have &ldquo;smoke tests&rdquo; that assure the copied
functionality is wired up correctly. Pull requests introducing untested functionality should not accepted, and
reviewers should give appropriate feedback to the submitter.</p>

<h2>Code can be copied from Android source when appropriate</h2>

<p>&ldquo;When appropriate&rdquo; is subjective. In an effort to avoid complexity, copying Android source as the basis for Shadow
object functionality is discouraged. That said, sometimes the functionality is complex and the Android implementation
is what is needed. Contributors and reviewers should use their best judgement: should a 3000-line Android class be
copied to gain access to a boolean getter and setter? It depends.</p>

<h2>Follow the code formatting standard</h2>

<p>This is essentially the IntelliJ default Java style, but with two-space indents.</p>

<ul>
<li>Spaces, not tabs.</li>
<li>Indenting: <a href="http://en.wikipedia.org/wiki/Indent_style#Variant:_1TBS">http://en.wikipedia.org/wiki/Indent_style#Variant:_1TBS</a> but with two spaces, not four.</li>
<li>Curly braces for everything: if, else, etc.</li>
<li>One line of white space between methods</li>
</ul>

<h1>Building and Testing</h1>

<p>You can build Robolectric on the command-line, or from within IntelliJ.</p>

<h2>Command-line</h2>

<p>In the command-line, there are a few scripts that you need to run to install correctly. If you are ever unsure, then check the <a href="https://github.com/robolectric/robolectric/blob/master/.travis.yml">Travis build file</a>, which should contain up-to-date build instructions.</p>

<p>The following instructions assume that you have an <code>ANDROID_HOME</code> environment variable pointing to the location of the Android SDK, and that the <code>android</code> executable is available from the <code>PATH</code>. If this is not the case, then run:</p>
<pre class="highlight plaintext">export ANDROID_HOME=/path/to/my/android/sdk
export PATH=$PATH:$ANDROID_HOME/platform-tools:$ANDROID_HOME/tools
</pre>
<p>To install dependencies, you will need to run:</p>
<pre class="highlight plaintext">echo "y" | android update sdk --no-ui --filter platform-tools,tools
echo "y" | android update sdk --no-ui --filter build-tools-20.0.0
echo "y" | android update sdk --no-ui --filter android-18
echo "y" | android update sdk --no-ui --filter addon-google_apis-google-18,extra-android-support
./scripts/install-maps-jar.sh
./scripts/install-support-jar.sh
</pre>
<p>Then to build Robolectric and run the unit tests, you will need to do:</p>
<pre class="highlight plaintext">./scripts/install-robolectric.sh
</pre>
<p>Currently these build instructions do not support Windows; only *nix environments.</p>

<h2>IntelliJ</h2>

<p>In IntelliJ, choose &ldquo;Import Project,&rdquo; then choose the <code>pom.xml</code> in the root directory. You can continue clicking &ldquo;Next&rdquo; at this point. You do not need to change any of the default options, i.e. you don&rsquo;t need to tick &ldquo;Import maven projects automatically&rdquo; or &ldquo;Search for projects recursively.&rdquo;</p>

<p>If it fails to build, you may need to run <code>mvn compile</code> in the command line at the root directory.</p>

<h2>Running individual tests</h2>

<p>Since the tests take awhile, you may be inclined to run them individually. To do this in IntelliJ, select the test you want to run in the left-hand panel, then choose <strong>Run</strong>, then <strong>Edit Configurations</strong>, then add <code>robolectric/</code> to the end of the <strong>Working Directory</strong>. Finally, choose <strong>Run NameOfTheTest</strong>.</p>

<p>If you don&rsquo;t modify the run configuration, then you will see errors, because the tests expect to be run from that directory.</p>

        </div>
    </div>

    <div id="footer">
        
    </div>
</body>
</html>